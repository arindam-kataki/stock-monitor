<!-- src/app/features/technology/technology.html -->
<div class="technology-container">
  <!-- Page Header with gradient background -->
  <div class="page-header">
    <div class="header-content">
      <h1>
        <span class="icon">ðŸ’»</span>
        Technology
      </h1>
      <p class="subtitle">
        Modern web technologies powering real-time stock data visualization
      </p>
    </div>
  </div>

  <!-- Main content -->
  <div class="technology-content">
    <!-- Deployment Architecture Section -->
    <section class="tech-section deployment-section">
      <h2>Deployment Architecture</h2>
      <div class="deployment-content">
        <div class="deployment-description">
          <h3>System Overview</h3>
          <p>
            The application uses a modern microservices architecture with NGINX
            as the entry point, serving both static Angular files and proxying
            API requests to the Express backend.
          </p>

          <h3>Key Components</h3>
          <ul>
            <li>
              <strong>NGINX:</strong> Handles HTTPS, load balancing, and reverse
              proxy
            </li>
            <li>
              <strong>Angular Frontend:</strong> Single-page application serving
              the UI
            </li>
            <li>
              <strong>Express Backend:</strong> RESTful API server on port 3000
            </li>
            <li>
              <strong>SQLite Database:</strong> Embedded database for stock data
              storage
            </li>
            <li>
              <strong>PM2 Process Manager:</strong> Manages background workers
              and ensures uptime
            </li>
            <li>
              <strong>Data Updater:</strong> Fetches real-time data from Yahoo
              Finance
            </li>
          </ul>

          <h3>Data Flow</h3>
          <p>
            Client requests are routed through NGINX, which serves static
            Angular files directly and forwards API calls to the Express
            backend. The backend queries SQLite for data, while background
            processes managed by PM2 continuously update the database with fresh
            market data from Yahoo Finance.
          </p>
        </div>

        <div class="deployment-diagram">
          <svg viewBox="0 0 800 550" xmlns="http://www.w3.org/2000/svg">
            <!-- Background -->
            <rect width="800" height="550" fill="#f8f9fa" />

            <!-- Client Browser Box -->
            <g id="client">
              <rect
                x="50"
                y="40"
                width="160"
                height="80"
                rx="8"
                fill="#667eea"
                stroke="#5568d3"
                stroke-width="2"
              />
              <text
                x="130"
                y="75"
                text-anchor="middle"
                fill="white"
                font-size="16"
                font-weight="600"
              >
                Client Browser
              </text>
              <text
                x="130"
                y="100"
                text-anchor="middle"
                fill="white"
                font-size="12"
              >
                Users
              </text>
            </g>

            <!-- NGINX Box -->
            <g id="nginx">
              <rect
                x="300"
                y="40"
                width="200"
                height="80"
                rx="8"
                fill="#10b981"
                stroke="#059669"
                stroke-width="2"
              />
              <text
                x="400"
                y="75"
                text-anchor="middle"
                fill="white"
                font-size="16"
                font-weight="600"
              >
                NGINX
              </text>
              <text
                x="400"
                y="100"
                text-anchor="middle"
                fill="white"
                font-size="12"
              >
                Reverse Proxy / Web Server
              </text>
            </g>

            <!-- Angular Frontend Box -->
            <g id="frontend">
              <rect
                x="250"
                y="180"
                width="140"
                height="100"
                rx="8"
                fill="#667eea"
                stroke="#5568d3"
                stroke-width="2"
              />
              <text
                x="320"
                y="215"
                text-anchor="middle"
                fill="white"
                font-size="16"
                font-weight="600"
              >
                Angular App
              </text>
              <text
                x="320"
                y="235"
                text-anchor="middle"
                fill="white"
                font-size="11"
              >
                Frontend
              </text>
              <text
                x="320"
                y="255"
                text-anchor="middle"
                fill="white"
                font-size="11"
              >
                Port: 4200
              </text>
            </g>

            <!-- Express Backend Box -->
            <g id="backend">
              <rect
                x="410"
                y="180"
                width="140"
                height="100"
                rx="8"
                fill="#764ba2"
                stroke="#6b3b94"
                stroke-width="2"
              />
              <text
                x="480"
                y="215"
                text-anchor="middle"
                fill="white"
                font-size="16"
                font-weight="600"
              >
                Express API
              </text>
              <text
                x="480"
                y="235"
                text-anchor="middle"
                fill="white"
                font-size="11"
              >
                Backend
              </text>
              <text
                x="480"
                y="255"
                text-anchor="middle"
                fill="white"
                font-size="11"
              >
                Port: 3000
              </text>
            </g>

            <!-- SQLite Database -->
            <g id="database">
              <rect
                x="580"
                y="180"
                width="140"
                height="100"
                rx="8"
                fill="#f59e0b"
                stroke="#d97706"
                stroke-width="2"
              />
              <text
                x="650"
                y="215"
                text-anchor="middle"
                fill="white"
                font-size="16"
                font-weight="600"
              >
                SQLite
              </text>
              <text
                x="650"
                y="235"
                text-anchor="middle"
                fill="white"
                font-size="11"
              >
                Database
              </text>
              <text
                x="650"
                y="255"
                text-anchor="middle"
                fill="white"
                font-size="11"
              >
                stocks.db
              </text>
            </g>

            <!-- PM2 Container -->
            <g id="pm2-container">
              <rect
                x="240"
                y="340"
                width="480"
                height="160"
                rx="8"
                fill="none"
                stroke="#6366f1"
                stroke-width="2"
                stroke-dasharray="5,5"
              />
              <text
                x="480"
                y="365"
                text-anchor="middle"
                fill="#6366f1"
                font-size="14"
                font-weight="600"
              >
                PM2 Process Manager
              </text>

              <!-- Data Updater Process -->
              <rect
                x="260"
                y="380"
                width="200"
                height="80"
                rx="8"
                fill="#8b5cf6"
                stroke="#7c3aed"
                stroke-width="2"
              />
              <text
                x="360"
                y="415"
                text-anchor="middle"
                fill="white"
                font-size="16"
                font-weight="600"
              >
                Data Updater
              </text>
              <text
                x="360"
                y="435"
                text-anchor="middle"
                fill="white"
                font-size="11"
              >
                Yahoo Finance Sync
              </text>

              <!-- Worker Process -->
              <rect
                x="500"
                y="380"
                width="200"
                height="80"
                rx="8"
                fill="#8b5cf6"
                stroke="#7c3aed"
                stroke-width="2"
              />
              <text
                x="600"
                y="415"
                text-anchor="middle"
                fill="white"
                font-size="16"
                font-weight="600"
              >
                Worker Process
              </text>
              <text
                x="600"
                y="435"
                text-anchor="middle"
                fill="white"
                font-size="11"
              >
                Background Jobs
              </text>
            </g>

            <!-- Yahoo Finance API -->
            <g id="yahoo">
              <rect
                x="50"
                y="380"
                width="140"
                height="80"
                rx="8"
                fill="#ef4444"
                stroke="#dc2626"
                stroke-width="2"
              />
              <text
                x="120"
                y="415"
                text-anchor="middle"
                fill="white"
                font-size="16"
                font-weight="600"
              >
                Yahoo Finance
              </text>
              <text
                x="120"
                y="435"
                text-anchor="middle"
                fill="white"
                font-size="11"
              >
                External API
              </text>
            </g>

            <!-- Arrows and Labels -->
            <defs>
              <marker
                id="arrowhead"
                markerWidth="10"
                markerHeight="10"
                refX="9"
                refY="3"
                orient="auto"
              >
                <polygon points="0 0, 10 3, 0 6" fill="#666" />
              </marker>
            </defs>

            <!-- Client to NGINX -->
            <line
              x1="210"
              y1="80"
              x2="300"
              y2="80"
              stroke="#666"
              stroke-width="2"
              marker-end="url(#arrowhead)"
            />
            <text
              x="255"
              y="70"
              text-anchor="middle"
              fill="#666"
              font-size="11"
            >
              HTTPS
            </text>

            <!-- NGINX to Frontend -->
            <line
              x1="370"
              y1="120"
              x2="340"
              y2="180"
              stroke="#666"
              stroke-width="2"
              marker-end="url(#arrowhead)"
            />
            <text
              x="340"
              y="150"
              text-anchor="middle"
              fill="#666"
              font-size="11"
            >
              Static Files
            </text>

            <!-- NGINX to Backend -->
            <line
              x1="430"
              y1="120"
              x2="460"
              y2="180"
              stroke="#666"
              stroke-width="2"
              marker-end="url(#arrowhead)"
            />
            <text
              x="460"
              y="150"
              text-anchor="middle"
              fill="#666"
              font-size="11"
            >
              /api/*
            </text>

            <!-- Frontend to Backend -->
            <line
              x1="390"
              y1="230"
              x2="410"
              y2="230"
              stroke="#666"
              stroke-width="2"
              marker-end="url(#arrowhead)"
            />
            <text
              x="400"
              y="220"
              text-anchor="middle"
              fill="#666"
              font-size="11"
            >
              API Calls
            </text>

            <!-- Backend to SQLite -->
            <line
              x1="550"
              y1="230"
              x2="580"
              y2="230"
              stroke="#666"
              stroke-width="2"
              marker-end="url(#arrowhead)"
            />
            <text
              x="565"
              y="220"
              text-anchor="middle"
              fill="#666"
              font-size="11"
            >
              Queries
            </text>

            <!-- Data Updater to SQLite -->
            <path
              d="M 460 420 Q 520 420 520 320 Q 520 230 580 230"
              stroke="#666"
              stroke-width="2"
              fill="none"
              marker-end="url(#arrowhead)"
            />
            <text
              x="520"
              y="310"
              text-anchor="middle"
              fill="#666"
              font-size="11"
            >
              Write Data
            </text>

            <!-- Yahoo to Data Updater -->
            <line
              x1="190"
              y1="420"
              x2="260"
              y2="420"
              stroke="#666"
              stroke-width="2"
              marker-end="url(#arrowhead)"
            />
            <text
              x="225"
              y="410"
              text-anchor="middle"
              fill="#666"
              font-size="11"
            >
              Fetch Data
            </text>

            <!-- Worker to SQLite -->
            <path
              d="M 600 380 Q 600 330 600 280"
              stroke="#666"
              stroke-width="2"
              fill="none"
              marker-end="url(#arrowhead)"
            />
            <text
              x="630"
              y="330"
              text-anchor="middle"
              fill="#666"
              font-size="11"
            >
              Process
            </text>

            <!-- Port Information Box -->
            <g id="ports-info" transform="translate(590, 40)">
              <rect
                x="0"
                y="0"
                width="160"
                height="100"
                rx="6"
                fill="white"
                stroke="#d1d5db"
                stroke-width="1"
              />
              <text
                x="80"
                y="20"
                text-anchor="middle"
                font-size="12"
                font-weight="600"
                fill="#333"
              >
                Service Ports
              </text>
              <text x="10" y="40" font-size="10" fill="#666">
                â€¢ NGINX: 80/443
              </text>
              <text x="10" y="55" font-size="10" fill="#666">
                â€¢ Angular Dev: 4200
              </text>
              <text x="10" y="70" font-size="10" fill="#666">
                â€¢ Express API: 3000
              </text>
              <text x="10" y="85" font-size="10" fill="#666">
                â€¢ SQLite: File-based
              </text>
            </g>
          </svg>
        </div>
      </div>
    </section>

    <!-- Technologies Section -->
    <section class="tech-section">
      <h2>Technologies</h2>
      <div class="tech-list-container">
        <ul class="plain-list">
          <li *ngFor="let tech of technologies">{{ tech }}</li>
        </ul>
      </div>
    </section>

    <!-- Data Section -->
    <section class="tech-section data-section">
      <h2>Data</h2>
      <div class="data-content">
        <div class="data-description">
          <p>
            The application fetches real-time and historical stock market data
            from Yahoo Finance, providing comprehensive market information for
            informed decision-making.
          </p>
        </div>

        <div class="data-info-grid">
          <div class="data-info-card">
            <h3>Data Source</h3>
            <p>
              Real-time stock prices and historical data are retrieved from
              Yahoo Finance API, ensuring accurate and up-to-date market
              information. Data is fetched at regular intervals to maintain
              current pricing and volume information.
            </p>
          </div>

          <div class="data-info-card">
            <h3>Storage Architecture</h3>
            <p>
              All market data is stored locally in a SQLite database for
              efficient querying and fast retrieval. Historical price data,
              intraday movements, and company information are organized in
              structured tables optimized for time-series analysis.
            </p>
          </div>

          <div class="data-info-card">
            <h3>Data Points Collected</h3>
            <ul>
              <li>Real-time stock prices and changes</li>
              <li>Daily open, high, low, close values</li>
              <li>Trading volume and market capitalization</li>
              <li>52-week high and low ranges</li>
              <li>5-minute interval data for intraday analysis</li>
              <li>Historical data for multiple timeframes</li>
            </ul>
          </div>

          <div class="data-info-card">
            <h3>Update Frequency</h3>
            <p>
              Stock prices are updated every 30 seconds during market hours.
              Historical data is cached and refreshed daily to ensure charts
              display the most recent market trends and movements.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Stock Tickers Section -->
    <section class="tech-section">
      <h2>Stock Tickers</h2>
      <div class="stock-tickers-content">
        <p class="tickers-description">
          The application monitors 31 carefully selected stocks across major
          market sectors, including technology leaders, financial institutions,
          healthcare giants, consumer brands, and market ETFs for benchmarking.
        </p>
        <ul class="plain-list">
          <li *ngFor="let ticker of preselectedStocks">{{ ticker }}</li>
        </ul>
      </div>
    </section>
  </div>
</div>
